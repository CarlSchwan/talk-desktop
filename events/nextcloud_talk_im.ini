[%define foreground]
sound.profile = im_fg.alert.tone => sound.filename
sound.profile.fallback = im_fg.alert.tone@fallback => sound.filename
sound.enabled.profile = im_fg.alert.enabled => sound.enabled
sound.stream.event.id = message-new-email
sound.stream.module-stream-restore.id = x-ringtone-volume
mce.led_pattern = PatternCommunicationIM

[%define foreground_haptic]
haptic.type = event
haptic.effect = message

[nextcloud_talk_im => context@call_state.mode == none]
%include.1 = foreground
%include.2 = foreground_haptic

[nextcloud_talk_im]
sink.null = empty

[nextcloud_talk_im => context@call_state.mode == none, play.mode == foreground, context@route.output.class == external]
%include.1 = foreground
%include.2 = foreground_haptic
sound.stream.module-stream-restore.id = x-media-playback-volume

[nextcloud_talk_im => context@call_state.mode == none, play.mode == *]
%include.1 = foreground
%include.2 = foreground_haptic
